<mat-card class="home mat-elevation-z3">
    <mat-card-title class="title">
        <strong>Cadastro de Livro</strong>
    </mat-card-title>

    <form [formGroup]="form">
        <mat-form-field appearance="outline">
            <mat-label>Isbn</mat-label>
            <input
                matInput
                name="isbn"
                placeholder="Isbn"
                formControlName="isbn"
            />
            <mat-error *ngIf="form.get('isbn')?.hasError('required')">
                Campo obrigatório
            </mat-error>
        </mat-form-field>

       <mat-form-field appearance="outline">
            <mat-label>Titulo</mat-label>
            <input
                matInput
                name="title"
                placeholder="Titulo"
                formControlName="title"
            />
            <mat-error *ngIf="form.get('title')?.hasError('required')">
                Campo obrigatório
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Idioma</mat-label>
            <input
                matInput
                name="language"
                placeholder="Idioma"
                formControlName="language"
            />
            <mat-error *ngIf="form.get('language')?.hasError('required')">
                Campo obrigatório
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Ano</mat-label>
            <input
                matInput
                name="year"
                placeholder="Ano"
                formControlName="year"
            />
            <mat-error *ngIf="form.get('year')?.hasError('required')">
                Campo obrigatório
            </mat-error>
            <mat-error *ngIf="form.get('year')?.hasError('pattern')">
                Campo deve ser um numero
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Edição</mat-label>
            <input
                matInput
                name="edition"
                placeholder="Edição"
                formControlName="edition"
            />
            <mat-error *ngIf="form.get('edition')?.hasError('required')">
                Campo obrigatório
            </mat-error>
            <mat-error *ngIf="form.get('edition')?.hasError('pattern')">
                Campo deve ser um numero
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Quantidade</mat-label>
            <input
                matInput
                name="quantity"
                placeholder="Quantidade"
                formControlName="quantity"
            />
            <mat-error *ngIf="form.get('quantity')?.hasError('required')">
                Campo obrigatório
            </mat-error>
            <mat-error *ngIf="form.get('quantity')?.hasError('pattern')">
                Campo deve ser um numero
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>ID Editora</mat-label>
            <input
                matInput
                name="publisherId"
                placeholder="ID Editora"
                formControlName="publisherId"
            />
            <mat-error *ngIf="form.get('publisherId')?.hasError('required')">
                Campo obrigatório
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>ID Autor</mat-label>
            <input
                matInput
                name="authorId"
                placeholder="ID Autor"
                formControlName="authorId"
            />
            <mat-error *ngIf="form.get('authorId')?.hasError('required')">
                Campo obrigatório
            </mat-error>
        </mat-form-field>

        <div formArrayName="authorIds" class="idsForm">
            <div *ngFor="let authorId of authorIdsFormArray.controls; let i = index">
                <mat-form-field appearance="outline">
                    <mat-label>ID do Autor {{ i + 2 }}</mat-label>
                    <input matInput [formControlName]="i"/>
                </mat-form-field>
                <button mat-icon-button color="warn" (click)="removeAuthorIdInput(i)">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
        </div>

        <mat-form-field appearance="outline">
            <mat-label>ID Tag</mat-label>
            <input
                matInput
                name="tagId"
                placeholder="ID Tag"
                formControlName="tagId"
            />
            <mat-error *ngIf="form.get('tagId')?.hasError('required')">
                Campo obrigatório
            </mat-error>
        </mat-form-field>

        <div formArrayName="tagIds" class="idsForm">
            <div *ngFor="let tagId of tagIdsFormArray.controls; let i = index">
                <mat-form-field appearance="outline">
                    <mat-label>ID da Tag {{ i + 2 }}</mat-label>
                    <input matInput [formControlName]="i"/>
                </mat-form-field>
                <button mat-icon-button color="warn" (click)="removeTagIdInput(i)">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
        </div>

        <mat-form-field appearance="outline">
            <mat-label>ID Categoria</mat-label>
            <input
                matInput
                name="categoryId"
                placeholder="ID Categoria"
                formControlName="categoryId"
            />
            <mat-error *ngIf="form.get('categoryId')?.hasError('required')">
                Campo obrigatório
            </mat-error>
        </mat-form-field>

        <div formArrayName="categoryIds" class="idsForm">
            <div *ngFor="let categoryId of categoryIdsFormArray.controls; let i = index">
                <mat-form-field appearance="outline">
                    <mat-label>ID da Categoria {{ i + 2 }}</mat-label>
                    <input matInput [formControlName]="i"/>
                </mat-form-field>
                <button mat-icon-button color="warn" (click)="removeCategoryIdInput(i)">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
        </div>

        <button mat-raised-button color="primary" (click)="addAuthorIdInput()">Adicionar outro autor</button>
        <button mat-raised-button color="primary" (click)="addTagIdInput()">Adicionar outra tag</button>
        <button mat-raised-button color="primary" (click)="addCategoryIdInput()">Adicionar outra categoria</button>
  </form>

    <div class="botoes">
        <button mat-raised-button (click)="salvar()" color="primary">Salvar</button>
        <button mat-raised-button (click)="cancelar()" color="warn">Cancelar</button>
    </div>  

</mat-card>
